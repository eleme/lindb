package memdb

// Each shard contains a MemoryDatabase.
//+------------------------------------+
//|              Shard                 |
//+------------------------------------+
//|           Memory Database          |
//+------------------+-----------------+
//|     Metric  	 |  Metric         |
//|     Store        |  Store          |
//+------------------+-----------------+
//
// +--------------+       +--------------+
// |              |------>|              |
// |              |-+     |              |-+
// |   Memory     | |     |  Metric      | |
// |   Database   | |-+   |  Store       | |-+
// |   RwMutex    | | |   |  RWMutex     | | |
// |              | | |   |              | | |
// |              | | |   |  FieldStore  | | |
// |   RadixTree  | | |   |  LRU List    | | |
// |   Mutex      | | |   |  Mutex       | | |
// |              | | |   |              | | |
// +-+------------+ | |   +--------------+ | |
//   +--------------+ |     +-----|--------+ |
//     +--------------+       +---|----------+
//                                |
//                                V
// +--------------+       +--------------+
// |              |<------|              |
// |              |-+     |              |-+
// |              | |     |              | |
// |   Field      | |-+   |  TimeSeries  | |-+
// |   Store      | | |   |  Store       | | |
// |              | | |   |              | | |
// |              | | |   |              | | |
// |              | | |   |              | | |
// |              | | |   |              | | |
// |  SpinLock    | | |   |   SpinLock   | | |
// +--------------+ | |   +--------------+ | |
//   +----|---------+ |     +--------------+ |
//     +--|-----------+       +--------------+
//        |
//        V
// +--------------+
// |              |
// |              |-+
// |              | |
// |   Segment    | |-+
// |   Store      | | |
// |              | | |
// |              | | |
// |              | | |
// |              | | |
// |              | | |
// +--------------+ | |
//   +--------------+ |
//     +--------------+
