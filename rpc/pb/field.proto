syntax = "proto3";

package field;

message MetricList {
    repeated Metric metrics = 2;
}

message Metric {
    string namespace = 1;
    string name = 2;
    int64 timestamp = 3;
    map<string, string> tags = 4;
    uint64 tagsHash = 5; // xxhash.Sum64String(tags), broker side generate before write wal
    repeated Field fields = 6;
}

message Sum {
    double value = 1;
}

message Min {
    double value = 1;
}

message Max {
    double value = 1;
}

message Gauge {
    double value = 1;
}

message Summary {
    repeated Quantile quantiles = 1;
    double sum = 2;
    double count = 3;
}

message Quantile {
    double quantile = 1;
    double value = 2;
}

message Histogram {
    repeated Bucket buckets = 1;
    double sum = 2;
    double count = 3;
}

message Bucket {
    double upperBound = 1;
    double value = 2;
}

message Field {
    string name = 1;
    oneof field {
        Sum sum = 2;
        Max max = 3;
        Min min = 4;
        Gauge gauge = 5;
        Summary summary = 6;
        Histogram histogram = 7;
    }
}
